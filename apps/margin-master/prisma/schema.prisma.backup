generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id          String        @id
  email       String        @unique
  name        String?
  password    String
  role        UserRole      @default(STAFF)
  createdAt   DateTime      @default(now())
  updatedAt   DateTime
  simulations simulations[]
}

model low_inventory_fees {
  id                     Int      @id @default(autoincrement())
  tierGroup              String   @db.VarChar(200)
  tierWeightLimitKg      Decimal  @db.Decimal(10, 2)
  daysOfSupplyLowerBound Int
  daysOfSupplyUpperBound Int
  marketplaceGroup       String   @db.VarChar(100)
  currency               String   @db.VarChar(3)
  fee                    Decimal  @db.Decimal(10, 4)
  createdAt              DateTime @default(now())
}

model low_price_fees {
  id                     Int      @id @default(autoincrement())
  programName            String   @db.VarChar(100)
  sizeTierName           String   @db.VarChar(100)
  lengthLimitCm          Decimal  @db.Decimal(10, 2)
  widthLimitCm           Decimal  @db.Decimal(10, 2)
  heightLimitCm          Decimal  @db.Decimal(10, 2)
  rateWeightLowerBoundKg Decimal  @db.Decimal(10, 2)
  rateWeightUpperBoundKg Decimal  @db.Decimal(10, 2)
  marketplace            String   @db.VarChar(50)
  currency               String   @db.VarChar(3)
  fee                    Decimal  @db.Decimal(10, 4)
  createdAt              DateTime @default(now())
}

model material_profiles {
  id              String   @id
  name            String
  countryOfOrigin String?  @db.Char(2)
  costPerArea     Decimal  @db.Decimal(10, 4)
  densityGCm3     Decimal  @db.Decimal(10, 4)
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime
}

model referral_fees {
  id               String   @id
  marketplaceGroup String   @db.VarChar(100)
  productCategory  String   @db.VarChar(500)
  subCategory      String?  @db.VarChar(200)
  condition        String?  @db.VarChar(100)
  feeType          String   @db.VarChar(50)
  priceLowerBound  Decimal  @db.Decimal(10, 2)
  priceUpperBound  Decimal  @db.Decimal(10, 2)
  feePercentage    Decimal  @db.Decimal(5, 2)
  maxFee           Decimal? @db.Decimal(10, 2)
  minReferralFee   Decimal  @db.Decimal(10, 2)
  mediaClosingFee  Decimal? @db.Decimal(10, 2)
  currency         String   @db.VarChar(3)
  createdAt        DateTime @default(now())
}

model simulations {
  id                     String            @id
  userId                 String
  name                   String
  marketplace            String            @db.VarChar(10)
  targetSalePrice        Decimal           @db.Decimal(10, 2)
  estimatedAcosPercent   Decimal           @db.Decimal(5, 2)
  refundProvisionPercent Decimal           @db.Decimal(5, 2)
  sourcingProfileId      String
  components             Json
  results                Json
  createdAt              DateTime          @default(now())
  updatedAt              DateTime
  sourcing_profiles      sourcing_profiles @relation(fields: [sourcingProfileId], references: [id])
  User                   User              @relation(fields: [userId], references: [id])
}

model sipp_discounts {
  id                     Int      @id @default(autoincrement())
  programName            String   @db.VarChar(100)
  sizeTierName           String   @db.VarChar(100)
  rateWeightLowerBoundKg Decimal  @db.Decimal(10, 2)
  rateWeightUpperBoundKg Decimal  @db.Decimal(10, 2)
  marketplace            String   @db.VarChar(50)
  currency               String   @db.VarChar(3)
  discount               Decimal  @db.Decimal(10, 4)
  createdAt              DateTime @default(now())
}

model sourcing_profiles {
  id                    String        @id
  name                  String
  countryOfOrigin       String?       @db.Char(2)
  tariffRatePercent     Decimal       @db.Decimal(5, 2)
  freightAssumptionCost Decimal?      @db.Decimal(10, 2)
  freightUnit           String?       @db.VarChar(50)
  costBufferPercent     Decimal       @db.Decimal(5, 2)
  createdAt             DateTime      @default(now())
  updatedAt             DateTime
  simulations           simulations[]
}

model standard_fees {
  id                     Int      @id @default(autoincrement())
  sizeTierName           String   @db.VarChar(100)
  lengthLimitCm          Decimal  @db.Decimal(10, 2)
  widthLimitCm           Decimal  @db.Decimal(10, 2)
  heightLimitCm          Decimal  @db.Decimal(10, 2)
  tierUnitWeightLimitKg  Decimal? @db.Decimal(10, 2)
  tierDimWeightLimitKg   Decimal? @db.Decimal(10, 2)
  rateWeightLowerBoundKg Decimal  @db.Decimal(10, 2)
  rateWeightUpperBoundKg Decimal  @db.Decimal(10, 2)
  marketplace            String   @db.VarChar(50)
  currency               String   @db.VarChar(3)
  fee                    Decimal  @db.Decimal(10, 4)
  createdAt              DateTime @default(now())
}

model storage_fees {
  id               String   @id
  marketplaceGroup String   @db.VarChar(100)
  productSize      String   @db.VarChar(50)
  productCategory  String   @db.VarChar(200)
  period           String   @db.VarChar(50)
  unitOfMeasure    String   @db.VarChar(50)
  currency         String   @db.VarChar(3)
  fee              Decimal  @db.Decimal(10, 4)
  createdAt        DateTime @default(now())
}

enum UserRole {
  ADMIN
  STAFF
}
