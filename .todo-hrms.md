1. https://dev-ecomos.targonglobal.com/hrms/organogram?view=department - chart does not update dynamically

2. Design pub sub based service that we will use across hrms to push email and in app notifications to all the subscribers - note that email notifications should just tell the users to access the app instead of publishing raw notifications

3. We will integrate this pubsub service, across all features in the app which may benifit from a pubsub system. i.e. disciplinary notifciations, reviews, policy updates

4. redesign back to back to reasonable defaults for each page instead of recording the literal journey of each user i.e. do NOT behave like a browser based back

5. Add employee access on this page https://dev-ecomos.targonglobal.com/hrms/employees - remove this feature - and limit imports directly form google admin, so if a new user is created on google admin u should be automatically importing that user

6. Sync both ways between google admin and hrms portal

7. Find attributes that are supposed to be editable by the user that are not critical - so info permissions like phone number, address, etc. have to be filled by the user and critical permissions like roles or project assignment is only editable by their manager and so forth for managers this will repeat until the end (i.e. until u reach the root)

8. permission boundaries have to be designed carefully, and permissions have to flow downward from the root

9. Attributes that are critical need to be defined, like names should not be editable the user itself - but these attributes should come from google admin

10. https://dev-ecomos.targonglobal.com/hrms/organogram?view=project - UIUX between "By Project" , By department by person needs to be aligned and consistent - by person UIUX is good

11. right now Jarrar Amjad is the root, so he should be able to move anyone with absolute permissions - but for regular admins they are able to move people around only under them - so lets say Umair AFzal does not report to anyone i.e. top level - it should technically NOT BE POSSIBLE for another manager who is also top level to move him under him. - only super admin or any manager above him should be able to do that - just like a N-ary Tree


12. FULL REVAMP

This is the **Master Implementation Plan** for your Values-Driven HRMS.

This plan integrates your 4 Core Values (**Courage, Honesty, Integrity, Attention to Detail**) into the logic engine of the system, ensuring that culture is not just a poster on the wall, but the metric by which people are hired, promoted, or fired.

---

###Phase 1: The "Translation Layer" (Data Structure)We stop using generic HR terms in the database and UI. We map everything to your values.

####1. Performance Review SchemaInstead of generic buckets like "Productivity," we create specific buckets that map to your values.

| Database Field | Label in UI | Core Value Link | Weight |
| --- | --- | --- | --- |
| `rating_precision` | **Quality & Precision** | **Attention to Detail** | 40% |
| `rating_transparency` | **Communication & Transparency** | **Honesty** | 20% |
| `rating_reliability` | **Reliability & Ethics** | **Integrity** | 20% |
| `rating_initiative` | **Ownership & Initiative** | **Courage** | 20% |

####2. Disciplinary SchemaWe add a mandatory "Root Cause" field to every violation record.

* **Field:** `primary_value_breached`
* **Options:** `BREACH_OF_HONESTY`, `BREACH_OF_INTEGRITY`, `BREACH_OF_DETAIL`, `BREACH_OF_COURAGE`.

---

###Phase 2: The Performance Evaluation LogicThis logic runs whenever a review is submitted. It calculates the score and applies the "Culture Guardrails."

####Step A: Calculate Raw Score####Step B: Apply "The Values Veto" (The Competent Jerk Filter)This handles the edge case where someone is high-performing but toxic.

* **Logic:** IF (`rating_transparency` < 3 OR `rating_reliability` < 3)
* **Result:** The Max Possible `Final Score` is capped at **2.9** (Needs Improvement).
* **UI Feedback:** *"Despite high technical output, this employee‚Äôs score is capped due to low scores in Core Values (Honesty/Integrity)."*

####Step C: The "New Hire" CalibrationThis handles the edge case where it is unfair to rate deep character traits too early.

* **Logic:** IF (`employment_duration` < 90 days)
* **Result:** Disable `rating_initiative` (Courage) and `rating_reliability` (Integrity). Re-distribute weight to **Attention to Detail (80%)** and **Honesty (20%)** (Attendance/Reporting).

---

###Phase 3: The Disciplinary Logic (Severity Matrix)The system automatically categorizes the severity of a violation based on *which* value was breached.

| Violation Context | Value Breached | System Severity Assignment |
| --- | --- | --- |
| Recurring Mistakes, Sloppy Work | **Attention to Detail** | **Minor / Moderate** (Training Issue) |
| Avoiding difficult tasks, Hiding bad news | **Courage** | **Moderate** (Coaching Issue) |
| Lying, Falsifying records | **Honesty** | **Major / Critical** (Character Issue) |
| Theft, Harassment, Toxic Behavior | **Integrity** | **Critical** (Zero Tolerance) |

**The Logic Rule:**
A breach of **Honesty** or **Integrity** carries a 2x multiplier on "Standing Damage" compared to a breach of Detail or Courage.

---

###Phase 4: The "Traffic Light" Standing (Real-Time Status)This is the computed status displayed on the employee dashboard.

####üü¢ Green: "Role Model"* **Condition:** No Active Violations AND Last Review > 3.5.
* **Requirement:** Must have scored > 3 in *Honesty* and *Integrity* specifically.

####üü° Yellow: "Misaligned / Coaching"* **Condition A (Skill Gap):** Active Minor/Moderate Violation for *Attention to Detail*.
* **Condition B (Growth Gap):** Review Score between 2.5 - 3.5.
* **System Action:** Suggests "Training Plan" rather than "Disciplinary Action."

####üî¥ Red: "Cultural Mismatch"* **Condition A:** Any Active Violation for *Honesty* or *Integrity*.
* **Condition B:** "Values Veto" triggered in performance review.
* **Condition C:** Review Score < 2.5.
* **System Action:** Blocks Promotion/Raise workflows. Suggests PIP or Termination.

---

###Phase 5: User Interface Flows####1. The Manager Review Interface* **Side-by-Side View:** Employee Self-Rating vs. Manager Rating.
* **The "Why" Prompt:** If Manager gives a low score on *Integrity* or *Honesty*, a text box appears: *"Low scores in core values require specific examples. Please describe the incident."*

####2. The Violation Reporting Form* **Question 1:** "Describe the incident."
* **Question 2:** "Which Core Value was primarily compromised?" (Dropdown: Courage, Honesty, Integrity, Detail).
* **Question 3:** "Did the employee take ownership?" (Yes/No).
* *Logic:* If "No", and value is "Honesty", severity escalates automatically.



####3. The Dashboard WidgetA simple card on the Admin Dashboard:

* **Header:** "Cultural Health"
* **Metric:** % of employees in Green Standing.
* **Alert:** List of employees currently in "Red" due to *Integrity/Honesty* breaches (High Priority Risk).

---

###Implementation Roadmap1. **Database Migration:** Add `value_breached` enum and rename review columns to match the 4 values.
2. **Logic Utility:** Create `calculateStanding(employee)` function that implements the "Values Veto" and weighting logic.
3. **Review Form:** Update the UI to group questions under the 4 Value Headers.
4. **Violation Form:** Add the "Root Cause" value selector.

This system effectively filters out "Competent Jerks" (Red) and identifies "Honest Incompetents" for training (Yellow), ensuring your company grows around its core identity.

---

# HRMS Revamp Plan (State‚Äëof‚Äëthe‚ÄëArt HRIS)

> **Scope**: HRIS for our own org (single tenant for now).  
> **Explicitly out of scope (for now)**: ATS/Recruiting, multi‚Äëtenancy.  
> **Target**: BambooHR‚Äëlevel HRIS completeness + Rippling‚Äëgrade automation/integrations (without necessarily rebuilding payroll/benefits immediately).

## 0) North‚ÄëStar Outcomes (what ‚Äúdone‚Äù looks like)

- HRMS is the **system of record** for people/org data (accurate, auditable, role‚Äësecured).
- Every HR process is **workflow‚Äëdriven** (clear owner, SLA, approvals, reminders, and audit trail).
- Employees and managers can **self‚Äëserve** (updates, requests, policies, tasks, documents) with minimal HR back‚Äëand‚Äëforth.
- HR has **case management** and **compliance controls** (confidentiality, retention, evidence, decision logs).
- Reporting answers: **headcount, turnover, time‚Äëoff, performance, comp changes, policy compliance, case volume/SLAs**.
- Integrations cover the basics (Google Workspace directory, calendar, Slack/email notifications, exports) with a path to payroll/time/benefits.

## 1) Current Baseline (already in the product)

> Keep this section updated as features ship so it‚Äôs clear what‚Äôs ‚Äúgap‚Äù vs ‚Äúdone‚Äù.

- Employee directory + profile editing
- Org chart / hierarchy + departments
- Projects (basic)
- Resources + policies (policy acknowledgements exist)
- Leave policies/balances/requests
- Performance reviews + quarterly cycles
- Disciplinary actions (‚Äúviolations‚Äù)
- Notifications (with read receipts)
- HR calendar + Google Calendar integration
- Google Workspace admin sync (employee import)
- Workflow primitives:
  - Tasks (assignment, due, status; can relate to employees; can be linked to HR cases)
  - HR cases (participants, notes, attachments)
  - Work Queue (aggregated ‚Äúthings requiring action‚Äù)
  - Employee timeline (unified activity feed)
  - Audit logs (who did what, when)

## 2) Key Gaps vs BambooHR / Rippling (HRIS focus)

### 2.1 Employee System of Record (SoR)

- Custom fields (configurable per org; typed; required/optional)
- Effective‚Äëdated history for key fields (job/manager/department/comp/region changes)
- Documents vault (employee docs beyond ‚Äúcase attachments‚Äù, with access controls + expiration)
- Lifecycle tooling (onboarding/offboarding, transfers, status changes with approvals)

### 2.2 Workflows, approvals, automation

- Rule‚Äëbased workflows (trigger ‚Üí tasks/approvals/notifications)
- Approvals framework (policies, comp changes, transfers, terminations, exceptions)
- Reminders/escalations (SLA‚Äëdriven)
- Templates (onboarding packets, offboarding checklists, case templates)

### 2.3 Reporting & analytics

- Standard HR dashboards and exportable reports
- Audit and compliance reporting (policy acknowledgement compliance, access logs)
- ‚ÄúSingle pane‚Äù manager dashboards (their team status, pending approvals, upcoming events)

### 2.4 Integrations (parity path)

- Slack/email notifications (assignment, reminders, approvals)
- Identity / provisioning hooks (at minimum: Google Workspace groups + calendar events)
- Payroll/benefits/time tracking: plan for integrations (don‚Äôt hard‚Äëcode vendor specifics)

### 2.5 UX/product polish

- Consistent information architecture: ‚ÄúWork‚Äù (inbox) is primary; everything else is searchable and linked.
- Better permission messaging (‚Äúwhy can‚Äôt I see this?‚Äù) + guided setup.
- Mobile‚Äëgrade responsiveness for employee self‚Äëserve.

## 3) Architecture Blueprint (how we build this without chaos)

### 3.1 Domains (keep code and data cohesive)

- **People**: employees, custom fields, docs, lifecycle (join/transfer/exit)
- **Org**: departments, hierarchy, roles/permissions
- **Time Off**: leave policies, balances, requests, approvals
- **Performance**: cycles, reviews, feedback (later: 1:1s, goals)
- **Compliance**: policies/acks, audit logs, retention
- **Cases**: HR case management + investigations + outcomes (incl. ‚Äúviolations‚Äù)
- **Work**: tasks, approvals, work queue, reminders/escalations
- **Integrations**: google admin/calendar, slack/email, exports, webhooks
- **Insights**: reporting, dashboards, scheduled reports

### 3.2 Data patterns (Postgres/Prisma)

- **Effective dating** for critical employment data:
  - Add history tables (e.g., `EmployeeJobHistory`, `EmployeeCompHistory`) and use them as the source of truth for reporting.
- **Soft delete / retention** where required (cases, docs) + immutable audit trail.
- **Versioning** for policy documents and templates (never ‚Äúedit in place‚Äù without preserving history).
- **Idempotency** for background jobs and integrations (dedupe keys + cron locks).

### 3.3 Security model (minimum viable ‚Äúenterprise‚Äù)

- Role types (suggested):
  - `SUPER_ADMIN` (root)
  - `HR_ADMIN` (HR operations)
  - `HR_CASE_MANAGER` (confidential case access)
  - `MANAGER`
  - `EMPLOYEE`
- Permissions must be **server‚Äëenforced** for every read/write (UI is not security).
- Cases require **confidentiality levels** (who can view: HR only / HR+involved / manager chain, etc.).
- Documents require **explicit ACL** (who can view/download, link expiry, watermarking later).

### 3.4 Workflow engine (incremental)

- Start with **task templates + simple triggers** (no visual builder yet).
- Add **approval objects** as first‚Äëclass (not just ‚Äútasks that say approve‚Äù).
- Add escalation rules + reminders via scheduled jobs.
- Later: workflow builder UI and webhooks.

## 4) Roadmap & Detailed Implementation Plan

> Each milestone is shippable. Prefer small PRs behind feature flags rather than ‚Äúbig bang‚Äù rewrites.

### Milestone 0 ‚Äî Stabilize & harden the foundation (1‚Äì2 weeks)

- [ ] **Permissions hardening**
  - [ ] Audit current API routes for consistent permission checks.
  - [ ] Standardize a single `requireActor()` + `requireRole()` + `requireManageableEmployee()` pattern.
  - [ ] Add ‚Äúreason‚Äù responses for 403s (safe messaging) so UI can explain access limits.
- [ ] **Tasks v1 UX polish**
  - [ ] Decide: allow self‚Äëassignment in UI (recommended: yes).
  - [ ] Add task templates (simple: ‚ÄúOnboarding checklist‚Äù, ‚ÄúOffboarding checklist‚Äù, ‚ÄúPolicy follow‚Äëup‚Äù).
  - [ ] Add reminders: ‚Äúdue soon‚Äù and ‚Äúoverdue‚Äù notifications.
  - [ ] Add bulk actions: reassign, mark done, set due date.
- [ ] **Cases v1 UX polish**
  - [ ] Create tasks from within a case (case‚Äëlinked tasks).
  - [ ] Add participant roles (subject, reporter, witness, manager, HR).
  - [ ] Add case status workflow: `OPEN ‚Üí INVESTIGATING ‚Üí DECIDED ‚Üí CLOSED` with required fields per step.
- [ ] **Audit & compliance**
  - [ ] Expand audit events coverage: employee edits, approvals, policy changes, case actions, file downloads.
  - [ ] Add ‚Äúwho viewed case/doc‚Äù access logs (append‚Äëonly).
- [ ] **Operational**
  - [ ] Add a safe, documented migration procedure for dev‚Üímain releases.
  - [ ] Add health checks for background jobs (sync, reminders).
- [ ] **Testing**
  - [ ] Add Playwright smoke tests for: login, employee directory, create task, create case, approve leave.

### Milestone 1 ‚Äî Employee Profile 2.0 (SoR) + Custom Fields (3‚Äì5 weeks)

**Goal**: HR can model real employee data without ad‚Äëhoc fields or spreadsheets.

- [ ] **Custom fields framework**
  - [ ] Schema:
    - [ ] `CustomFieldDefinition` (key, label, type, required, scope, visibility)
    - [ ] `CustomFieldValue` (employeeId, fieldId, typed value)
  - [ ] Types: string, number, date, boolean, enum, multi‚Äëselect, file ref.
  - [ ] Visibility: employee self‚Äëview/edit, manager view, HR only.
  - [ ] UI:
    - [ ] Admin UI to define fields and group them by section (‚ÄúPersonal‚Äù, ‚ÄúEmployment‚Äù, ‚ÄúEmergency‚Äù, ‚ÄúCompliance‚Äù, etc.)
    - [ ] Employee profile shows sections; edit forms render dynamically.
  - [ ] Data export: CSV export including custom fields (with permission filtering).
- [ ] **Effective‚Äëdated employment history**
  - [ ] Schema:
    - [ ] `EmployeeJobHistory` (departmentId, position, managerId, employmentType, startAt, endAt)
    - [ ] `EmployeeStatusHistory` (status, reason, startAt, endAt)
  - [ ] UI:
    - [ ] ‚ÄúEmployment changes‚Äù flow: propose change ‚Üí approval (optional) ‚Üí apply with effective date.
  - [ ] Reporting:
    - [ ] Headcount by department over time.
    - [ ] Transfer history for an employee.
- [ ] **Employee documents vault**
  - [ ] Schema:
    - [ ] `EmployeeDocument` (category, title, fileUrl/storageKey, visibility, expiresAt, uploadedBy, employeeId)
    - [ ] Optional: `EmployeeDocumentSignature` (for e‚Äësign later)
  - [ ] Storage:
    - [ ] Decide storage backend (S3 recommended) + signed URL download.
  - [ ] UI:
    - [ ] Upload/download with permissions.
    - [ ] Expiration alerts (visa, ID, certifications).
  - [ ] Compliance:
    - [ ] Audit downloads and deletions.
    - [ ] Retention policy per category.

### Milestone 2 ‚Äî Onboarding (4‚Äì6 weeks)

**Goal**: New hires are productive fast; everything is tracked, assigned, and auditable.

- [ ] **Onboarding program templates**
  - [ ] Schema:
    - [ ] `OnboardingTemplate` (name, appliesTo: dept/role/region)
    - [ ] `OnboardingTemplateStep` (type: task/policy/doc, defaultAssignee: HR/Manager/IT/Employee, offsetDaysFromStart, required)
  - [ ] UI:
    - [ ] HR creates templates; preview checklist.
    - [ ] ‚ÄúStart onboarding for employee‚Äù (select template; override steps/assignees).
- [ ] **Onboarding run (instance)**
  - [ ] Schema:
    - [ ] `OnboardingRun` (employeeId, startDate, status)
    - [ ] `OnboardingRunItem` (links to tasks/policy acknowledgements/doc requirements)
  - [ ] Behavior:
    - [ ] Auto‚Äëcreate tasks with due dates.
    - [ ] Auto‚Äëassign policy acknowledgements (required reading + signoff).
    - [ ] Collect documents (IDs, signed handbook, etc.)
    - [ ] Reminders + escalation rules (overdue).
  - [ ] Integrations:
    - [ ] Optional: Google Workspace group membership tasks or webhook to IT (phase 1).
- [ ] **Employee welcome self‚Äëserve**
  - [ ] ‚ÄúMy onboarding‚Äù page: tasks, policy acks, upload docs, FAQs/resources.
  - [ ] Progress indicator + due dates.

### Milestone 3 ‚Äî Offboarding (4‚Äì6 weeks)

**Goal**: Clean exits with minimal risk: access removal, asset return, knowledge transfer, documentation.

- [ ] **Offboarding templates**
  - [ ] Schema parallels onboarding: `OffboardingTemplate`, `OffboardingTemplateStep`.
  - [ ] Steps include: equipment return, account offboarding, final docs, exit interview, knowledge transfer.
- [ ] **Termination/resignation workflow**
  - [ ] Schema:
    - [ ] `Separation` (type, reason, lastWorkingDay, effectiveAt, initiatedBy, status)
  - [ ] Approvals:
    - [ ] Manager + HR approval (configurable).
  - [ ] Integrations:
    - [ ] Trigger Google Workspace access disable (later: SCIM/provisioning).
  - [ ] Compliance:
    - [ ] Document retention rules and ‚Äúlegal hold‚Äù for active cases.

### Milestone 4 ‚Äî Approvals framework + Workflow automation (6‚Äì10 weeks)

**Goal**: Replace ‚Äúmanual chasing‚Äù with a real approvals and automation layer.

- [ ] **Approval primitives**
  - [ ] Schema:
    - [ ] `ApprovalRequest` (type, subjectEmployeeId, payloadJson, createdBy, status)
    - [ ] `ApprovalStep` (approverType: HR/Manager/Role/User, status, decidedAt, decisionNote)
  - [ ] Integrate with Work Queue (approvals appear as actionable items).
  - [ ] Audit every decision and payload snapshot.
- [ ] **Workflow triggers (v1)**
  - [ ] Trigger sources:
    - [ ] employee created / status change
    - [ ] job change proposed
    - [ ] comp change proposed
    - [ ] leave request submitted
    - [ ] policy published / updated
    - [ ] case opened / escalated
  - [ ] Trigger actions:
    - [ ] create tasks
    - [ ] create approval request
    - [ ] notify via in‚Äëapp + email/slack
  - [ ] Admin UI: configure which templates apply to which triggers (simple form‚Äëbased configuration).
- [ ] **Reminders/escalations**
  - [ ] ‚ÄúDue soon‚Äù reminders
  - [ ] ‚ÄúOverdue‚Äù escalation to manager/HR
  - [ ] SLA tracking for cases and approvals

### Milestone 5 ‚Äî Case Management 2.0 (Violations/HR cases) (4‚Äì8 weeks)

**Goal**: Treat ‚Äúviolations‚Äù as formal HR cases with consistent outcomes and evidence handling.

- [ ] **Unify disciplinary actions with cases**
  - [ ] Decide data strategy:
    - [ ] Option A: make DisciplinaryAction a case subtype (recommended).
    - [ ] Option B: keep DisciplinaryAction but auto‚Äëcreate linked case for investigations.
  - [ ] Migration/backfill plan if changing schema.
- [ ] **Case templates + outcomes**
  - [ ] Case types: misconduct, attendance, performance issue, grievance, harassment, policy breach, etc.
  - [ ] Required fields by type (severity, allegations, policies involved, timeline).
  - [ ] Outcomes: warning/suspension/termination/cleared, with decision notes and attachments.
- [ ] **Confidentiality & access**
  - [ ] Per‚Äëcase access policy:
    - [ ] HR only
    - [ ] HR + subject‚Äôs manager chain
    - [ ] HR + explicit participants
  - [ ] Add ‚Äúsealed notes‚Äù visible only to HR/case managers.
- [ ] **Evidence & chain‚Äëof‚Äëcustody**
  - [ ] Attachments: signed URLs, download logs, immutable metadata.
  - [ ] Note editing policy: edits create a new version (append‚Äëonly) with audit.
- [ ] **SLA + reporting**
  - [ ] Track: opened‚Üífirst response time, time to resolution, reopened count.

### Milestone 6 ‚Äî Compensation (5‚Äì10 weeks)

**Goal**: Replace ad‚Äëhoc salary edits with structured, approved, reportable comp management.

- [ ] **Compensation history**
  - [ ] Schema:
    - [ ] `EmployeeCompHistory` (currency, amount, effectiveAt, reason, createdBy, approvalId?)
  - [ ] UI:
    - [ ] ‚ÄúPropose comp change‚Äù flow with approvals.
    - [ ] Show comp history to HR only; limited view to managers based on policy.
- [ ] **Salary bands / levels**
  - [ ] Schema: `JobLevel`, `SalaryBand` (min/mid/max, currency, region, dept).
  - [ ] UI: admin manage bands, employee mapping to level.
  - [ ] Validations: warn if comp outside band; require justification/approval.
- [ ] **Comp review cycle**
  - [ ] ‚ÄúMerit cycle‚Äù tool: manager recommendations ‚Üí calibration ‚Üí HR finalize.
  - [ ] Reporting: budget vs actual.

### Milestone 7 ‚Äî Reporting & Analytics v1 (4‚Äì8 weeks)

**Goal**: HR and leadership can answer key questions without spreadsheets.

- [ ] **Data marts (views)**
  - [ ] Create DB views/materialized views for common reports (headcount, turnover, leave usage, case SLAs).
  - [ ] Add role‚Äëfiltered exports (CSV) from UI.
- [ ] **Dashboards**
  - [ ] HR dashboard: headcount, open cases, overdue tasks, upcoming expirations.
  - [ ] Manager dashboard: team requests, pending approvals, upcoming reviews, onboarding status.
  - [ ] Compliance dashboard: policy ack completion, overdue expirations, audit anomalies.
- [ ] **Scheduled reports**
  - [ ] Email/slack delivery for weekly HR ops summary.

### Milestone 8 ‚Äî Integrations & Notifications (ongoing; ship incrementally)

- [ ] **Email notifications**
  - [ ] Assignment/reminder for tasks
  - [ ] Approval request and decision
  - [ ] Policy published / ack overdue
  - [ ] Case participant notifications (careful with confidentiality)
- [ ] **Slack notifications**
  - [ ] Optional; opt‚Äëin per user/role.
- [ ] **Google Workspace**
  - [ ] Improve sync: handle renames, department mapping, de‚Äëprovisioning signals.
  - [ ] Optional: group management hooks (later).
- [ ] **Webhooks / API for other internal systems**
  - [ ] Events: employee created/updated, separation initiated, approval decided.
  - [ ] Auth: signed webhook secrets + replay protection.

### Milestone 9 ‚Äî UX, search, and self‚Äëserve polish (ongoing)

- [ ] **Global search**
  - [ ] Search employees, departments, tasks, cases, policies.
  - [ ] Permission‚Äëaware results.
- [ ] **Information architecture**
  - [ ] Make `Work` the default landing ‚Äúinbox‚Äù.
  - [ ] Add quick actions: request leave, create case, create task, publish policy.
- [ ] **Employee self‚Äëserve**
  - [ ] ‚ÄúMy profile‚Äù: clear editable vs read‚Äëonly sections.
  - [ ] ‚ÄúMy documents‚Äù: upload docs HR requests; view personal docs.
  - [ ] ‚ÄúMy requests‚Äù: leave, approvals, tasks.
- [ ] **Mobile responsiveness**
  - [ ] Ensure core pages are fully usable on mobile.

## 5) Engineering Checklist (applies to every milestone)

- [ ] **Schema + migrations**
  - [ ] Add Prisma migrations with clear names.
  - [ ] Include backfill scripts when needed (idempotent).
  - [ ] Document deploy steps for dev/main DB schemas.
- [ ] **Security**
  - [ ] Verify server‚Äëside authorization on every route (read/write).
  - [ ] Add audit logs for sensitive actions (view/download, edits, approvals).
- [ ] **Performance**
  - [ ] Pagination for large lists (employees, tasks, cases).
  - [ ] Avoid N+1 queries; use Prisma includes/selects carefully.
- [ ] **Testing**
  - [ ] Add Playwright coverage for critical paths in `apps/hrms/tests/e2e`.
  - [ ] Add unit tests where logic is complex (permissions, workflow trigger resolution).
- [ ] **Observability**
  - [ ] Structured logs for background jobs and integrations.
  - [ ] Basic error dashboards (at minimum: capture server errors and surface them to admin).

## 6) Open Questions (decide early; impacts schema)

- [ ] What is the authoritative source of employee data: Google Workspace vs HRMS edits? (sync conflict rules)
- [ ] What confidentiality rules should govern HR cases by default?
- [ ] Do managers see compensation numbers or only ranges/eligibility?
- [ ] Which documents require e‚Äësign, and do we integrate DocuSign/HelloSign or build simple in‚Äëapp signing?
- [ ] Which external systems must integrate first (Slack, payroll vendor, time tracking)?

## 7) Suggested Execution Strategy (how we actually ship this)

- Work in small vertical slices: schema ‚Üí API ‚Üí UI ‚Üí tests ‚Üí rollout.
- Use feature flags for high‚Äërisk modules (cases v2, approvals).
- Release cadence:
  - Merge into `dev` continuously
  - Ship `dev ‚Üí main` weekly/bi‚Äëweekly once smoke tests are green
  - Always run migrations safely before app restarts
